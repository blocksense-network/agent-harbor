# Copyright 2025 Schelling Point Labs Inc
# SPDX-License-Identifier: AGPL-3.0-only

name: task_delivery_pr_requires_push
tags:
  - cli
  - task
  - delivery
  - pr
repo:
  init: true
timeline:
  - userCommand:
      args:
        - task
        - create
        - pr-branch
        - --prompt
        - PR delivery requires push
        - --delivery
        - pr
        - --target-branch
        - main
        - --non-interactive
        - --push-to-remote
        - 'false'
      expect:
        exitCode: 1
        stderrContains: requires pushing
  - assertGit:
      branch: pr-branch
      exists: false
